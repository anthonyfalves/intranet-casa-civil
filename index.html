<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intranet Casa Civil</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div class="page">
    <header class="top-bar">
      <div class="brand">
        <img src="assets/logo-casa-civil.png" alt="Logo Casa Civil" aria-hidden="true">
        <div class="brand-text">GOVERNO DO ESTADO DO MATO GROSSO</div>
      </div>
      <div class="social">
        <!-- Troque os href abaixo para os links reais das redes -->
        <a href="https://x.com/GovMatoGrosso" aria-label="Twitter">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 4s-.9 1.2-2 1.7c-.8-.9-2-1.5-3.2-1.5-2.6 0-4.6 2-4.6 4.5 0 .3 0 .6.1.9-3.7-.2-7-1.9-9.2-4.6-.4.6-.6 1.3-.6 2.1 0 1.5.8 2.9 2 3.7-.7 0-1.3-.2-1.9-.5v.1c0 2.1 1.5 3.9 3.5 4.3-.4.1-.8.2-1.3.2-.3 0-.6 0-.9-.1.6 1.8 2.3 3.1 4.3 3.1-1.6 1.3-3.5 2-5.6 2-.4 0-.7 0-1.1-.1 2 1.3 4.3 2 6.8 2 8.1 0 12.5-6.6 12.5-12.4v-.6c.8-.6 1.5-1.3 2-2.1z"></path>
          </svg>
        </a>
        <a href="https://www.youtube.com/@secom_mt" aria-label="YouTube">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3.5 7.4c.2-.8.8-1.5 1.6-1.7C6.9 5.4 9.6 5 12 5s5.1.4 6.9.7c.8.2 1.4.9 1.6 1.7.3 1.6.5 3.2.5 4.3 0 1.1-.2 2.7-.5 4.3-.2.8-.8 1.5-1.6 1.7-1.8.3-4.5.7-6.9.7s-5.1-.4-6.9-.7c-.8-.2-1.4-.9-1.6-1.7C3.2 14.4 3 12.8 3 11.7c0-1.1.2-2.7.5-4.3z"></path>
            <path d="M10.5 9.3 14 12l-3.5 2.7V9.3z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/govmatogrosso/" aria-label="Instagram">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="5"></rect>
            <path d="M16 11.4c.1 2.5-1.8 4.6-4.2 4.6-2.4 0-4.4-2.1-4.3-4.6C7.4 9 9.3 7 11.8 7c2.4 0 4.3 1.9 4.2 4.4z"></path>
            <path d="M17.5 6.5h.01"></path>
          </svg>
        </a>
        <a href="https://www.facebook.com/govmatogrosso/" aria-label="Facebook">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 4h-2.3C10.2 4 9 5.5 9 7.8V9H7v3h2v7h3v-7h2.3l.7-3H12V7.8c0-.6.2-.8.8-.8H15V4z"></path>
          </svg>
        </a>
      </div>
    </header>

    <section class="main-grid">
      <div class="left-col">
        <a class="banner" href="#" aria-label="Aviso de feriado"></a>

        <div class="birthdays">
          <div class="birthdays-header">
            <h3>Aniversariantes</h3>
            <div class="month-nav">
              <button type="button" aria-label="Mes anterior">&#8249;</button>
              <span>dezembro</span>
              <button type="button" aria-label="Proximo mes">&#8250;</button>
            </div>
          </div>
          <ul data-birthdays></ul>
        </div>
      </div>

      <div class="right-col">
        <div class="hero-title">
          <p class="eyebrow">Intranet</p>
          <h1>Casa Civil</h1>
        </div>
        <div class="quick-links" data-quick-links></div>
      </div>
    </section>

    <section class="corporate">
      <h2>Sistemas Corporativos</h2>
      <div class="corporate-grid" data-corporate-links></div>
    </section>
  </div>

  <script>
    // Troque os href nos itens abaixo pelos links reais de cada card
    // checkUrl é opcional; se vazio, usa o próprio href no health check.
    const quickLinks = [
      { title: "Site CASA CIVIL", desc: "Institucional", icon: "home", href: "https://www.casacivil.mt.gov.br/a-secretaria", checkUrl: "https://www.casacivil.mt.gov.br/favicon.ico" },
      { title: "Ajuda", desc: "Sistema de Helpdesk", icon: "help", href: "https://atendimento.casacivil.mt.gov.br", checkUrl: "https://atendimento.casacivil.mt.gov.br/favicon.ico" },
      { title: "Ramal", desc: "Sistema de ramais", icon: "phone", href: "https://www.casacivil.mt.gov.br/inicio", checkUrl: "https://www.casacivil.mt.gov.br/favicon.ico" },
      { title: "Capacitacoes Corporativa", desc: "Capacitacoes para os servidores publicos da Casa Civil", icon: "chip", href: "https://casacivil.intranet.mt.gov.br", checkUrl: "https://casacivil.intranet.mt.gov.br/favicon.ico" },
      { title: "Works", desc: "Gestao de comunicacao e marketing", icon: "chat", href: "https://exemplo.com/works", checkUrl: "https://exemplo.com/favicon.ico" },
      { title: "Obras do Governo", desc: "Controle de obras", icon: "building", href: "https://tv.mt.gov.br", checkUrl: "https://tv.mt.gov.br/favicon.ico" }
    ];

    // Para colorir verde/vermelho: defina um checkUrl (recurso leve, ex. favicon) para cada sistema.
    const corporateSystems = [
      { title: "Portal do Servidor", href: "https://servicos.seplag.mt.gov.br/portalservidor/", checkUrl: "https://servicos.seplag.mt.gov.br/portalservidor/favicon.ico" },
      { title: "Sistema SIGA-DOC", href: "https://www.sigadoc.mt.gov.br/", checkUrl: "https://www.sigadoc.mt.gov.br/favicon.ico" },
      { title: "FIPLAN", href: "https://www.fiplan.mt.gov.br/Fiplan.jsp", checkUrl: "https://www.fiplan.mt.gov.br/favicon.ico" },
      { title: "SEAP", href: "https://seapng.seplag.mt.gov.br/", checkUrl: "https://seapng.seplag.mt.gov.br/favicon.ico" },
      { title: "SIGPAS", href: "https://sigpas.seplag.mt.gov.br", checkUrl: "https://sigpas.seplag.mt.gov.br/favicon.ico" },
      { title: "SIGPAT", href: "#", checkUrl: "" },
      { title: "Compras Publicas", href: "https://aquisicoes.seplag.mt.gov.br", checkUrl: "https://aquisicoes.seplag.mt.gov.br/favicon.ico" },
      { title: "Legislacao", href: "#", checkUrl: "" }
    ];

    const birthdays = [
      { date: "01/12", name: "EDILSON SANTOS SOUZA" },
      { date: "01/12", name: "RICKSON BARBOSA" },
      { date: "04/12", name: "TIAGO ANDRADE ARAUJO" },
      { date: "05/12", name: "RICARDO NASCIMENTO SANTOS" },
      { date: "05/12", name: "NAYARA XAVIER DA CONCEICAO" }
    ];

    const icons = {
      home: '<svg viewBox="0 0 24 24"><path d="M4 10.5 12 4l8 6.5v7.5a2 2 0 0 1-2 2h-3.5v-5.5h-5V20H6a2 2 0 0 1-2-2v-7.5z"></path></svg>',
      help: '<svg viewBox="0 0 24 24"><path d="M12 17.5v.01"></path><path d="M10.5 9.3c.2-1.2 1.1-2.1 2.5-2.1 1.4 0 2.4 1 2.4 2.2 0 1.1-.7 1.7-1.5 2.2-.7.5-1.3 1-1.3 2v.3"></path><circle cx="12" cy="12" r="9"></circle></svg>',
      phone: '<svg viewBox="0 0 24 24"><path d="M6.5 4.5h3l1 4-2 1a12.5 12.5 0 0 0 6 6l1-2 4 1v3a2 2 0 0 1-2.2 2 15.5 15.5 0 0 1-13.8-13.8 2 2 0 0 1 2-2.2z"></path></svg>',
      chip: '<svg viewBox="0 0 24 24"><rect x="5" y="5" width="14" height="14" rx="2"></rect><path d="M9 5v-2M15 5v-2M9 21v-2M15 21v-2M5 9h-2M5 15h-2M21 9h-2M21 15h-2"></path></svg>',
      chat: '<svg viewBox="0 0 24 24"><path d="M5 16.5V6.8A2.8 2.8 0 0 1 7.8 4h8.4A2.8 2.8 0 0 1 19 6.8v6.4a2.8 2.8 0 0 1-2.8 2.8H9l-4 2.2z"></path></svg>',
      users: '<svg viewBox="0 0 24 24"><path d="M8 13.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zM17 12.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M3.5 19c.4-2.5 2.7-4.5 5.5-4.5s5.1 2 5.5 4.5"></path><path d="M15.5 15c1.9 0 3.6 1.4 4 3.2"></path></svg>',
      cart: '<svg viewBox="0 0 24 24"><path d="M4 5h2l1.5 11h9L18 9H7.2"></path><circle cx="10" cy="19" r="1"></circle><circle cx="16" cy="19" r="1"></circle><path d="M4 5 3 3"></path></svg>',
      fuel: '<svg viewBox="0 0 24 24"><path d="M6 5a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v15H6V5z"></path><path d="M13 8h2l3 3v6a2 2 0 0 1-2 2h-3"></path><path d="M18 7.5a1.5 1.5 0 1 1 3 0c0 1.8-2 2-2 3"></path><path d="M6 10h7"></path></svg>',
      building: '<svg viewBox="0 0 24 24"><path d="M5 20V6.5a2 2 0 0 1 1.7-2L14 3v17"></path><path d="M14 6.5 18.5 7A2 2 0 0 1 20 9v11"></path><path d="M4 20h16"></path><path d="M8 10h2M8 13h2M8 16h2M14 10h2M14 13h2M14 16h2"></path></svg>',
      calendar: '<svg viewBox="0 0 24 24"><rect x="4" y="5" width="16" height="15" rx="2"></rect><path d="M8 3v4M16 3v4M4 10h16"></path><path d="M9 14h2v2H9zM13 14h2v2h-2z"></path></svg>'
    };

    const quickLinksContainer = document.querySelector("[data-quick-links]");
    const corporateContainer = document.querySelector("[data-corporate-links]");
    const birthdaysList = document.querySelector("[data-birthdays]");

    function renderQuickLinks() {
      quickLinks.forEach((item) => {
        const link = document.createElement("a");
        link.className = "quick-card status-unknown";
        link.href = item.href;
        link.innerHTML = `
          <span class="icon">${icons[item.icon] || icons.home}</span>
          <div>
            <h3>${item.title}</h3>
            <p>${item.desc}</p>
          </div>
        `;
        quickLinksContainer.appendChild(link);
      });
    }

    function renderCorporate() {
      corporateSystems.forEach((item) => {
        const link = document.createElement("a");
        link.href = item.href;
        link.textContent = item.title;
        link.dataset.statusCard = "corporate";
        link.classList.add("status-unknown");
        corporateContainer.appendChild(link);
      });
    }

    function renderBirthdays() {
      birthdays.forEach((person) => {
        const row = document.createElement("li");
        row.innerHTML = `
          <span class="day">${person.date}</span>
          <span class="name">${person.name}</span>
        `;
        birthdaysList.appendChild(row);
      });
    }

    renderQuickLinks();
    renderCorporate();
    renderBirthdays();
    checkCorporateStatus();
    checkQuickLinksStatus();

    // -------- Status dos sistemas (online/offline) --------
    function probeUrl(url, timeout = 5000) {
      return new Promise((resolve) => {
        if (!url || url === "#") return resolve(false);
        const img = new Image();
        let finished = false;
        const done = (ok) => {
          if (finished) return;
          finished = true;
          resolve(ok);
          clearTimeout(timer);
        };
        const cacheBust = url.includes("?") ? "&" : "?";
        img.onload = () => done(true);
        img.onerror = () => done(false);
        img.src = `${url}${cacheBust}ping=${Date.now()}`;
        const timer = setTimeout(() => done(false), timeout);
      });
    }

    function checkCorporateStatus() {
      const links = corporateContainer.querySelectorAll("a");
      links.forEach((el, idx) => {
        const target = corporateSystems[idx];
        const testUrl = target?.checkUrl || target?.href;
        probeUrl(testUrl).then((ok) => {
          el.classList.remove("status-online", "status-offline", "status-unknown");
          el.classList.add(ok ? "status-online" : "status-offline");
        });
      });
    }

    function checkQuickLinksStatus() {
      const links = quickLinksContainer.querySelectorAll(".quick-card");
      links.forEach((el, idx) => {
        const target = quickLinks[idx];
        const testUrl = target?.checkUrl || target?.href;
        probeUrl(testUrl).then((ok) => {
          el.classList.remove("status-online", "status-offline", "status-unknown");
          el.classList.add(ok ? "status-online" : "status-offline");
        });
      });
    }
  </script>
</body>
</html>
